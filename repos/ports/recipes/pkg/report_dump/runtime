runtime | ram: 80M | caps: 1000 | binary: init

+ requires
  + file_system | label: report | writeable: no
  + file_system | label: target | writeable: yes
  + timer
  + rtc

+ config
  + parent-provides
    + service ROM
    + service PD
    + service RM
    + service CPU
    + service LOG
    + service Timer
    + service File_system
    + service Rtc

  + default-route
    + any-service
      + parent
      + any-child

  + default | caps: 100

  + start vfs | caps: 150 | ram: 12M
    + provides | + service File_system
    + route
      + service File_system | label_prefix: target -> | + parent | identity: target
      + service File_system | label_prefix: report -> | + parent | identity: report
      + any-service                                   | + parent
    + config
      + vfs
      | + tar bash-minimal.tar
      | + tar coreutils.tar
      | + dir dev
      |   + zero
      |   + null
      |   + log
      |   + rtc
      | + dir pipe   | + pipe
      | + dir rw     | + fs | label: target -> /
      | + dir report | + fs | label: report -> /
      | + dir tmp    | + ram
      | + inline .bash_profile
      |   :
      |   : while true; do
      |   : export VERSION=`printf "%(%T)T"`
      |   : mkdir "/rw/$VERSION"
      |   : cp -r /report/* "/rw/$VERSION/"
      |   : sleep 60
      |   : done
      |   :
      + policy | label_prefix: vfs_rom | root: /
      + default-policy                 | root: / | writeable: yes

  + start vfs_rom | ram: 16M
    + binary fs_rom
    + provides | + service ROM
    + config
    + route
      + service File_system | + child vfs
      + any-service         | + parent

  + start /bin/bash | caps: 450 | ram: 28M
    + exit | propagate: yes
    + config
    | + libc | stdin: /dev/null | stdout: /dev/null | stderr: /dev/log
    |        | rtc:   /dev/rtc  | pipe:   /pipe
    | + vfs | + fs
    | + arg bash
    | + arg --login
    | + env TERM | : screen
    | + env PATH | : /bin
    | + env HOME | : /
    + route
      + service File_system                 | + child vfs
      + service ROM | label_suffix: .lib.so | + parent
      + service ROM | label_last: /bin/bash | + child vfs_rom
      + service ROM | label_prefix: /bin    | + child vfs_rom
      + any-service
        + parent
        + any-child

+ content
  + rom | label: ld.lib.so
  + rom | label: libc.lib.so
  + rom | label: libm.lib.so
  + rom | label: init
  + rom | label: fs_rom
  + rom | label: posix.lib.so
  + rom | label: bash-minimal.tar
  + rom | label: coreutils.tar
  + rom | label: vfs
  + rom | label: vfs.lib.so
  + rom | label: vfs_pipe.lib.so
-
