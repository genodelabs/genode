runtime | ram: 280M | caps: 2500 | binary: init

+ requires | + timer

+ fail    | after_seconds: 120
+ succeed | : child "sequence" exited with exit value 0

+ content
  + rom | label: ld.lib.so
  + rom | label: libc.lib.so
  + rom | label: libm.lib.so
  + rom | label: posix.lib.so
  + rom | label: vfs.lib.so
  + rom | label: vfs_lxip.lib.so
  + rom | label: lxip.lib.so
  + rom | label: nic_bridge
  + rom | label: nic_loopback
  + rom | label: vfs
  + rom | label: test-tcp
  + rom | label: sequence

+ config | verbose: yes
  + parent-provides
    + service ROM
    + service PD
    + service RM
    + service CPU
    + service LOG
    + service Timer

  + default-route
    + any-service
      + parent
      + any-child

  + start nic_loopback | caps: 200 | ram: 1M
    + provides | + service Nic

  + start nic_bridge | caps: 200 | ram: 10M
    + provides | + service Nic
    + config | verbose: no
    | + policy | label_prefix: sequence -> local -> recv     | ip_addr: 192.168.1.1
    | + policy | label_prefix: sequence -> local -> send     | ip_addr: 192.168.1.2
    | + policy | label_prefix: sequence -> remote -> recv_fs | ip_addr: 192.168.1.1
    | + policy | label_prefix: sequence -> remote -> send_fs | ip_addr: 192.168.1.2
    + route
      + service Nic | + child nic_loopback
      + any-service
        + parent
        + any-child

  + start sequence | caps: 1800 | ram: 100M
    + config
    | + start local | caps: 800
    | | + binary init
    | | + config
    | |   + parent-provides
    | |   | + service ROM
    | |   | + service PD
    | |   | + service RM
    | |   | + service CPU
    | |   | + service LOG
    | |   | + service Timer
    | |   | + service Nic
    | |   + default-route
    | |   | + any-service
    | |   |   + parent
    | |   |   + any-child
    | |   + default | caps: 256
    | |   + start recv | ram: 16M
    | |   | + binary test-tcp
    | |   | + exit | propagate: yes
    | |   | + config
    | |   |   + arg recv
    | |   |   + libc | stdout: /log | stderr: /log | socket: /socket
    | |   |   + vfs
    | |   |     + log
    | |   |     + dir socket
    | |   |       + lxip | ip_addr: 192.168.1.1 | netmask: 255.255.255.0
    | |   + start send | ram: 16M
    | |     + binary test-tcp
    | |     + config
    | |       + arg send | : 192.168.1.1
    | |       + libc | stdout: /log | stderr: /log | socket: /socket
    | |       + vfs
    | |         + log
    | |         + dir socket
    | |           + lxip | ip_addr: 192.168.1.2 | netmask: 255.255.255.0
    | |
    | + start remote | caps: 800
    |   + binary init
    |   + config
    |     + parent-provides
    |     | + service ROM
    |     | + service PD
    |     | + service RM
    |     | + service CPU
    |     | + service LOG
    |     | + service Timer
    |     | + service Nic
    |     + default-route
    |     | + any-service
    |     |   + parent
    |     |   + any-child
    |     + default | caps: 200
    |     |
    |     + start recv_fs | ram: 10M
    |     | + binary vfs
    |     | + provides | + service File_system
    |     | + config
    |     |   + vfs
    |     |   | + dir socket
    |     |   |   + lxip | ip_addr: 192.168.1.1 | netmask: 255.255.255.0
    |     |   + default-policy | writeable: yes | root: /
    |     |
    |     + start send_fs | ram: 10M
    |     | + binary vfs
    |     | + provides | + service File_system
    |     | + config
    |     |   + vfs
    |     |   | + dir socket
    |     |   |   + lxip | ip_addr: 192.168.1.2 | netmask: 255.255.255.0
    |     |   + default-policy | writeable: yes | root: /
    |     |
    |     + start recv | ram: 10M
    |     | + binary test-tcp
    |     | + exit | propagate: yes
    |     | + config
    |     | | + arg recv
    |     | | + libc | stdout: /log | stderr: /log | socket: /socket
    |     | | + vfs
    |     | |   + log
    |     | |   + fs
    |     | + route
    |     |   + service File_system | + child recv_fs
    |     |   + any-service
    |     |     + parent
    |     |     + any-child
    |     |
    |     + start send | ram: 10M
    |       + binary test-tcp
    |       + config
    |       | + arg send | : 192.168.1.1
    |       | + libc | stdout: /log | stderr: /log | socket: /socket
    |       | + vfs
    |       |   + log
    |       |   + fs
    |       + route
    |         + service File_system | + child send_fs
    |         + any-service
    |           + parent
    |           + any-child
    + route
      + service Nic | + child nic_bridge
      + any-service
        + parent
        + any-child
-
