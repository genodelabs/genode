runtime | ram: 32M | caps: 1000 | binary: init

+ requires | + timer

+ fail    | after_seconds: 20
+ succeed | : [rom_logger]   config | iteration: 4

+ content
  + rom | label: ld.lib.so
  + rom | label: dynamic_rom
  + rom | label: fs_rom
  + rom | label: vfs
  + rom | label: vfs.lib.so
  + rom | label: rom_logger
  + rom | label: rom_to_file

+ config
  + parent-provides
    + service CPU
    + service IO_MEM
    + service IO_PORT
    + service IRQ
    + service LOG
    + service PD
    + service RM
    + service ROM
    + service Timer

  + default-route
    + any-service
      + parent
      + any-child

  + default | caps: 100

  + start vfs_1 | ram: 10M
    + binary vfs
    + provides | + service File_system
    + config
      + vfs | + ram
      + policy | label_prefix: rom_to_file | root: / | writeable: yes
      + policy | label_prefix: vfs_2       | root: / | writeable: no

  + start vfs_2 | ram: 10M
    + binary vfs
    + provides | + service File_system
    + config
      + vfs | + fs
      + policy | label_prefix: fs_rom | root: / | writeable: no
    + route
      + service File_system | + child vfs_1
      + any-service
        + parent
        + any-child

  + start dynamic_rom | ram: 4M
    + provides | + service ROM
    + config | verbose: yes
      + rom dynamic_rom
        + inline | description: iteration 1 | + config | iteration: 1
        + sleep  | milliseconds: 200
        + inline | description: iteration 2 | + config | iteration: 2
        + sleep  | milliseconds: 200
        + inline | description: iteration 3 | + config | iteration: 3
        + sleep  | milliseconds: 200
        + inline | description: iteration 4 | + config | iteration: 4
        + sleep  | milliseconds: 200

  + start rom_to_file | ram: 2M
    + config | rom: dynamic_rom
    | + vfs | + fs
    + route
      + service ROM | label: dynamic_rom | + child dynamic_rom
      + service File_system              | + child vfs_1
      + any-service
        + parent
        + any-child

  + start fs_rom | ram: 2M
    + provides | + service ROM
    + route
      + service File_system | + child vfs_2
      + any-service         | + parent

  + start rom_logger | ram: 1M
    + config | rom: dynamic_rom
    + route
      + service ROM | label: dynamic_rom | + child fs_rom
      + any-service                      | + parent
-
